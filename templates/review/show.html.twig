{% extends 'base.html.twig' %}

{% block title %}{{ review.title }} - üî• {{ review.badge ?? 'Expert Review' }} | Best Deal 2025{% endblock %}

{% block body %}

    <div class="sticky-deal-bar d-lg-none">
        <div class="container-fluid">
            <div class="d-flex align-items-center justify-content-between py-2 px-3">
                <div>
                    <div class="deal-price">{{ review.price }} –ª–≤.</div>
                    <div class="deal-rating">‚≠ê {{ review.rating }}.0</div>
                </div>
                <a href="{{ path('app_buy_redirect', {id: review.id}) }}" target="_blank" rel="nofollow noopener" class="btn-sticky-mobile">
                    <i class="bi bi-cart-fill me-1"></i>–ö–£–ü–ò –°–ï–ì–ê
                </a>
            </div>
        </div>
    </div>

    <div class="container-fluid bg-white border-bottom py-3">
        <div class="container">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb mb-0">
                    <li class="breadcrumb-item"><a href="{{ path('app_home') }}" class="text-decoration-none"><i class="bi bi-house-door-fill me-1"></i>–ù–∞—á–∞–ª–æ</a></li>
                    <li class="breadcrumb-item active" aria-current="page">{{ review.title|slice(0, 40) }}...</li>
                </ol>
            </nav>
        </div>
    </div>

    <div class="container my-4 my-lg-5">
        <div class="row g-4">
            <div class="col-lg-8">
                <article class="review-article">
                    <header class="article-header">
                        {% if review.badge %}
                            <div class="mega-badge-container mb-3">
                                <div class="mega-badge">
                                    <i class="bi bi-award-fill me-2"></i>{{ review.badge }}
                                </div>
                            </div>
                        {% endif %}

                        <h1 class="article-title">{{ review.title }}</h1>

                        <div class="meta-bar">
                            <div class="meta-item">
                                <i class="bi bi-calendar-check text-primary"></i>
                                <span>–û–±–Ω–æ–≤–µ–Ω–æ {{ review.createdAt|date('d.m.Y') }}</span>
                            </div>
                            <div class="meta-item">
                                <div class="rating-display">
                                    {% for i in 1..5 %}
                                        {% if i <= review.rating %}‚≠ê{% else %}‚òÜ{% endif %}
                                    {% endfor %}
                                </div>
                                <span class="rating-score">{{ review.rating }}.0/5.0</span>
                            </div>
                            <div class="meta-item">
                                <i class="bi bi-check-circle-fill text-success"></i>
                                <span>‚úÖ –ï–∫—Å–ø–µ—Ä—Ç–Ω–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ</span>
                            </div>
                        </div>
                    </header>

                    <div class="d-lg-none my-4">
                        <div class="mobile-cta-card text-center">
                            <div class="mobile-price-mega">{{ review.price }} –ª–≤.</div>
                            <div class="mobile-price-label">üî• –ì–û–†–ï–©–ê –û–§–ï–†–¢–ê</div>
                            <a href="{{ path('app_buy_redirect', {id: review.id}) }}" target="_blank" rel="nofollow noopener" class="btn-mobile-mega">
                                <i class="bi bi-lightning-charge-fill me-2"></i>–í–ó–ï–ú–ò –°–ï–ì–ê
                            </a>
                        </div>
                    </div>

                    <div class="article-content bg-white p-4 rounded-4 shadow-sm">
                        {{ review.content|raw }}
                    </div>

                    <div class="bottom-mega-cta mt-5">
                        <div class="cta-inner">
                            <div class="cta-icon">üöÄ</div>
                            <div class="cta-content">
                                <h3 class="cta-heading">–ì–æ—Ç–æ–≤–∏ –ª–∏ —Å—Ç–µ –∑–∞ –ø–æ–∫—É–ø–∫–∞?</h3>
                                <p class="cta-subtext">‚ö° –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ ‚Ä¢ üí∞ –ù–∞–π-–¥–æ–±—Ä–∞ —Ü–µ–Ω–∞ ‚Ä¢ ‚úÖ –ü—Ä–µ–ø–æ—Ä—ä—á–∞–Ω–æ</p>
                            </div>
                            <a href="{{ path('app_buy_redirect', {id: review.id}) }}" target="_blank" rel="nofollow noopener" class="btn-bottom-cta">
                                <i class="bi bi-cart-check-fill me-2"></i>–ö–£–ü–ò –°–ï–ì–ê
                            </a>
                        </div>
                    </div>

                    <div class="text-center mt-4">
                        <a href="{{ path('app_home') }}" class="btn-back">
                            <i class="bi bi-arrow-left me-2"></i>–í–∏–∂ –≤—Å–∏—á–∫–∏ –æ—Ñ–µ—Ä—Ç–∏
                        </a>
                    </div>
                </article>
            </div>

            <div class="col-lg-4">
                <div class="sticky-sidebar-wrapper">
                    <div class="deal-card">
                        {% if review.imageUrl %}
                            <div class="deal-image-wrapper">
                                <img src="{{ review.imageUrl }}" class="deal-image" alt="{{ review.title }}">
                                <div class="image-badge">üî• HOT</div>
                            </div>
                        {% endif %}

                        <div class="deal-body">
                            <div class="price-section">
                                <div class="price-label">–ê–ö–¢–£–ê–õ–ù–ê –¶–ï–ù–ê</div>
                                <div class="price-mega">{{ review.price }} –ª–≤.</div>
                                <div class="price-meta">–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –Ω–∞ {{ review.createdAt|date('d M') }}</div>
                            </div>

                            <a href="{{ path('app_buy_redirect', {id: review.id}) }}" target="_blank" rel="nofollow noopener" class="btn-sidebar-mega">
                                <div class="btn-mega-inner">
                                    <div class="btn-icon">üõí</div>
                                    <div class="btn-text-mega">
                                        <div class="btn-main-text">–ö–£–ü–ò –°–ï–ì–ê</div>
                                        <div class="btn-sub-text">–í–∏–∂ –æ—Ñ–µ—Ä—Ç–∞—Ç–∞ –≤ –º–∞–≥–∞–∑–∏–Ω–∞</div>
                                    </div>
                                </div>
                            </a>

                            <div class="trust-section">
                                <div class="trust-item"><i class="bi bi-shield-check text-success"></i> –°–∏–≥—É—Ä–Ω–æ –ø–ª–∞—â–∞–Ω–µ</div>
                                <div class="trust-item"><i class="bi bi-truck text-primary"></i> –ë—ä—Ä–∑–∞ –¥–æ—Å—Ç–∞–≤–∫–∞</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <style>
        /* STICKY DEAL BAR */
        .sticky-deal-bar { position: fixed; top: 0; left: 0; right: 0; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; z-index: 1000; box-shadow: 0 2px 20px rgba(0,0,0,0.2); }
        .btn-sticky-mobile { background: #ff6b6b; color: white !important; padding: 10px 20px; border-radius: 25px; font-weight: 800; text-decoration: none; }

        /* HEADER */
        .article-title { font-size: 2.5rem; font-weight: 900; color: #1a202c; line-height: 1.2; margin-top: 1rem; }
        .mega-badge { background: #667eea; color: white; padding: 10px 25px; border-radius: 50px; font-weight: 800; }
        .meta-bar { display: flex; gap: 20px; padding: 1.5rem 0; border-bottom: 2px solid #eee; margin-bottom: 2rem; flex-wrap: wrap; }

        /* CONTENT */
        .article-content { line-height: 1.8; font-size: 1.1rem; }

        /* CTA BOXES */
        .bottom-mega-cta { background: #ff6b6b; border-radius: 20px; padding: 30px; color: white; }
        .cta-inner { display: flex; align-items: center; gap: 20px; flex-wrap: wrap; }
        .btn-bottom-cta { background: white; color: #ff6b6b !important; padding: 15px 35px; border-radius: 50px; font-weight: 900; text-decoration: none; }

        /* SIDEBAR */
        .sticky-sidebar-wrapper { position: sticky; top: 80px; }
        .deal-card { background: white; border-radius: 20px; overflow: hidden; box-shadow: 0 10px 40px rgba(0,0,0,0.1); }
        .deal-image { width: 100%; height: 250px; object-fit: contain; padding: 20px; }
        .price-mega { font-size: 3rem; font-weight: 900; color: #22c55e; }
        .btn-sidebar-mega { background: #ff6b6b; color: white !important; text-decoration: none; border-radius: 15px; display: block; overflow: hidden; }
        .btn-mega-inner { padding: 20px; display: flex; align-items: center; gap: 15px; }

        @media (max-width: 991px) {
            .article-title { font-size: 1.8rem; }
            .sticky-sidebar-wrapper { position: static; }
        }
    </style>

{% endblock %}
