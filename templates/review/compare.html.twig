{% extends 'base.html.twig' %}

{% block title %}–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –Ω–∞ {{ category|replace({'-': ' '})|title }} - –ù–∞–π-–¥–æ–±—Ä–∏—Ç–µ –û—Ñ–µ—Ä—Ç–∏{% endblock %}

{% block body %}
<div class="container mt-4">
    <div class="row mb-4">
        <div class="col-12 text-center">
            <h1 class="display-5 fw-bold mb-3">
                üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –Ω–∞ –ü—Ä–æ–¥—É–∫—Ç–∏
            </h1>
            <p class="lead text-muted">
                –¢–æ–ø {{ products|length }} –æ—Ñ–µ—Ä—Ç–∏ –æ—Ç {{ category|replace({'-': ' ', '_': ' '})|title }}
            </p>
        </div>
    </div>

    <div class="row mb-4">
        <div class="col-12">
            <div class="alert alert-info d-flex align-items-center" style="border-radius: 12px;">
                <i class="bi bi-info-circle me-2" style="font-size: 1.5rem;"></i>
                <div>
                    <strong>–ö–∞–∫ —Ä–∞–±–æ—Ç–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ—Ç–æ?</strong><br>
                    –°—Ä–∞–≤–Ω—è–≤–∞–º–µ –ø—Ä–æ–¥—É–∫—Ç–∏—Ç–µ –ø–æ —Ü–µ–Ω–∞, —Ä–µ–π—Ç–∏–Ω–≥ –∏ –∞–∫—Ç—É–∞–ª–Ω–æ—Å—Ç, –∑–∞ –¥–∞ —Ç–∏ –ø–æ–º–æ–≥–Ω–µ–º –¥–∞ –Ω–∞–ø—Ä–∞–≤–∏—à –Ω–∞–π-–¥–æ–±—Ä–∏—è –∏–∑–±–æ—Ä!
                </div>
            </div>
        </div>
    </div>

    <div class="table-responsive">
        <table class="table table-hover align-middle" style="border-radius: 16px; overflow: hidden;">
            <thead class="table-dark">
                <tr>
                    <th style="width: 60px;">#</th>
                    <th style="width: 100px;">–°–Ω–∏–º–∫–∞</th>
                    <th>–ü—Ä–æ–¥—É–∫—Ç</th>
                    <th style="width: 120px;">–†–µ–π—Ç–∏–Ω–≥</th>
                    <th style="width: 120px;">–¶–µ–Ω–∞</th>
                    <th style="width: 150px;">–î–∞—Ç–∞</th>
                    <th style="width: 180px;">–î–µ–π—Å—Ç–≤–∏—è</th>
                </tr>
            </thead>
            <tbody>
                {% for product in products %}
                    <tr style="transition: all 0.3s ease;">
                        <td class="fw-bold text-primary">{{ loop.index }}</td>
                        <td>
                            <img src="{{ product.imageUrl ?: 'https://via.placeholder.com/80' }}"
                                 alt="{{ product.title }}"
                                 class="img-thumbnail"
                                 style="width: 80px; height: 80px; object-fit: cover; border-radius: 8px;">
                        </td>
                        <td>
                            <div class="fw-bold mb-1">{{ product.title|length > 80 ? product.title|slice(0, 80) ~ '...' : product.title }}</div>
                            {% if product.badge %}
                                <span class="badge bg-danger">{{ product.badge }}</span>
                            {% endif %}
                        </td>
                        <td>
                            <div class="d-flex flex-column">
                                <div>
                                    {% for i in 1..5 %}
                                        <i class="bi bi-star{{ i <= product.rating ? '-fill' : '' }} text-warning"></i>
                                    {% endfor %}
                                </div>
                                <small class="text-muted">{{ product.rating }}/5</small>
                            </div>
                        </td>
                        <td>
                            <span class="fw-bold text-success" style="font-size: 1.2rem;">{{ product.price }} –ª–≤.</span>
                        </td>
                        <td>
                            <small class="text-muted">{{ product.createdAt|date('d.m.Y') }}</small>
                        </td>
                        <td>
                            <div class="d-flex flex-column gap-1">
                                <a href="{{ path('app_review_show', {'slug': product.slug}) }}"
                                   class="btn btn-sm btn-outline-primary"
                                   style="border-radius: 8px; font-size: 0.85rem;">
                                    <i class="bi bi-eye"></i> –†–µ–≤—é
                                </a>
                                <a href="{{ path('app_buy_redirect', {'id': product.id}) }}"
                                   class="btn btn-sm btn-success"
                                   style="border-radius: 8px; font-size: 0.85rem;"
                                   target="_blank" rel="noopener">
                                    <i class="bi bi-cart-plus"></i> –ö—É–ø–∏
                                </a>
                            </div>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="row mt-5">
        <div class="col-12">
            <div class="card shadow-sm border-0" style="border-radius: 16px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                <div class="card-body p-4">
                    <h3 class="mb-3"><i class="bi bi-lightbulb"></i> SEO –°—ä–≤–µ—Ç–∏ –∑–∞ –ò–∑–±–æ—Ä</h3>
                    <ul class="mb-0">
                        <li><strong>–¶–µ–Ω–∞ vs –ö–∞—á–µ—Å—Ç–≤–æ:</strong> –ù–∞–π-–µ–≤—Ç–∏–Ω–∏—è—Ç –ø—Ä–æ–¥—É–∫—Ç –Ω–µ –≤–∏–Ω–∞–≥–∏ –µ –Ω–∞–π-–¥–æ–±—Ä–∏—è—Ç. –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ —Ä–µ–π—Ç–∏–Ω–≥–∞!</li>
                        <li><strong>–ê–∫—Ç—É–∞–ª–Ω–æ—Å—Ç:</strong> –ü–æ-–Ω–æ–≤–∏—Ç–µ –æ—Ñ–µ—Ä—Ç–∏ —á–µ—Å—Ç–æ –∏–º–∞—Ç –ø–æ-–¥–æ–±—Ä–∏ –ø—Ä–æ–º–æ—Ü–∏–∏.</li>
                        <li><strong>–ü—Ä–æ—á–µ—Ç–∏ —Ä–µ–≤—é—Ç–∞—Ç–∞:</strong> –î–µ—Ç–∞–π–ª–Ω–∏—Ç–µ —Ä–µ–≤—é—Ç–∞ —Ç–∏ –¥–∞–≤–∞—Ç –ø—ä–ª–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞ –ø—Ä–æ–¥—É–∫—Ç–∞.</li>
                        <li><strong>–°—Ä–∞–≤–Ω–∏ –º–∞–≥–∞–∑–∏–Ω–∏:</strong> –†–∞–∑–ª–∏—á–Ω–∏—Ç–µ –º–∞–≥–∞–∑–∏–Ω–∏ –ø—Ä–µ–¥–ª–∞–≥–∞—Ç —Ä–∞–∑–ª–∏—á–Ω–∏ —Ü–µ–Ω–∏ –∑–∞ —Å—ä—â–∏—è –ø—Ä–æ–¥—É–∫—Ç.</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="row mt-4">
        <div class="col-12 text-center">
            <a href="{{ path('app_home') }}" class="btn btn-lg btn-outline-primary" style="border-radius: 12px;">
                <i class="bi bi-arrow-left"></i> –û–±—Ä–∞—Ç–Ω–æ –∫—ä–º –í—Å–∏—á–∫–∏ –û—Ñ–µ—Ä—Ç–∏
            </a>
        </div>
    </div>
</div>

<style>
    tbody tr:hover {
        background-color: #f8f9fa;
        transform: scale(1.01);
    }

    .table thead th {
        background: #2d3748;
        color: white;
        font-weight: 700;
        text-transform: uppercase;
        font-size: 0.85rem;
        letter-spacing: 0.5px;
    }
</style>
{% endblock %}
